<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DIffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘ | duangdongçš„algorithm</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="å‰ç«¯ç›¸å…³çŸ¥è¯†å½’çº³æ€»ç»“">
    <meta name="keywords" content="qd-blog,node,vuepress,leetcode,algorithm">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.950eebbc.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/30.9ad0e230.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.f648d829.js"><link rel="prefetch" href="/assets/js/23.b85d0d4e.js"><link rel="prefetch" href="/assets/js/24.d81147fb.js"><link rel="prefetch" href="/assets/js/25.ed5233ca.js"><link rel="prefetch" href="/assets/js/26.83f1ef57.js"><link rel="prefetch" href="/assets/js/27.2565321e.js"><link rel="prefetch" href="/assets/js/28.e60083e4.js"><link rel="prefetch" href="/assets/js/29.49b5374e.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/31.c97534c6.js"><link rel="prefetch" href="/assets/js/32.b90554dc.js"><link rel="prefetch" href="/assets/js/33.9d15b4c0.js"><link rel="prefetch" href="/assets/js/34.297b5f45.js"><link rel="prefetch" href="/assets/js/35.029c4cac.js"><link rel="prefetch" href="/assets/js/36.bc299146.js"><link rel="prefetch" href="/assets/js/37.9068edfd.js"><link rel="prefetch" href="/assets/js/38.8c781d87.js"><link rel="prefetch" href="/assets/js/39.87c06c9c.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.b05763a5.js"><link rel="prefetch" href="/assets/js/41.447511bf.js"><link rel="prefetch" href="/assets/js/42.cef1f724.js"><link rel="prefetch" href="/assets/js/43.cae02230.js"><link rel="prefetch" href="/assets/js/44.833e4694.js"><link rel="prefetch" href="/assets/js/45.2933ab3e.js"><link rel="prefetch" href="/assets/js/46.1108fab7.js"><link rel="prefetch" href="/assets/js/47.1a5b2293.js"><link rel="prefetch" href="/assets/js/48.3f01058a.js"><link rel="prefetch" href="/assets/js/49.24929fd6.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.7e052a76.js"><link rel="prefetch" href="/assets/js/51.ae3eb599.js"><link rel="prefetch" href="/assets/js/52.bab65685.js"><link rel="prefetch" href="/assets/js/53.abacf47c.js"><link rel="prefetch" href="/assets/js/54.9d8ffddf.js"><link rel="prefetch" href="/assets/js/55.ac9707fe.js"><link rel="prefetch" href="/assets/js/56.9a9c42d4.js"><link rel="prefetch" href="/assets/js/57.f4d88e89.js"><link rel="prefetch" href="/assets/js/58.816a3870.js"><link rel="prefetch" href="/assets/js/59.8a6b3c7f.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdongçš„algorithm</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  æ•°æ®ç»“æ„
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/leetcode-summary/" class="nav-link">
  ç®—æ³•é¢˜
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  æ•°æ®ç»“æ„
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/leetcode-summary/" class="nav-link">
  ç®—æ³•é¢˜
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/algorithm/" aria-current="page" class="sidebar-link">ç®—æ³•ç›¸å…³</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯å®é™…é¡¹ç›®ä½¿ç”¨</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/algorithm/åŠ¨æ€è§„åˆ’.html" class="sidebar-link">å‰ç«¯ä¹Ÿèƒ½å­¦ç®—æ³•ï¼šç”±æµ…å…¥æ·±è®²è§£åŠ¨æ€è§„åˆ’</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ’åº</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/algorithm/ç”±æµ…å…¥æ·±è®²è§£è´ªå¿ƒç®—æ³•.html" class="sidebar-link">å‰ç«¯ä¹Ÿèƒ½å­¦ç®—æ³•ï¼šç”±æµ…å…¥æ·±è®²è§£è´ªå¿ƒç®—æ³•</a></li><li><a href="/algorithm/ç®€å•å¤ä¹ ä¸‹å‰ç«¯ç®—æ³•å¤æ‚åº¦ç›¸å…³çš„çŸ¥è¯†.html" class="sidebar-link">ç®€å•å¤ä¹ ä¸‹å‰ç«¯ç®—æ³•å¤æ‚åº¦ç›¸å…³çš„çŸ¥è¯†</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ç®—æ³•è¿›é˜¶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/ChromeV8æºç çœ‹JavaScriptæ•°ç»„.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•2ï¼šä»Chrome V8æºç çœ‹JavaScriptæ•°ç»„(é™„èµ è…¾è®¯é¢è¯•é¢˜)</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/DIffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘.html" class="active sidebar-link">DIffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/Diffç®—æ³•æ ¸å¿ƒåŸç†.html" class="sidebar-link">15å¼ å›¾ï¼Œ20åˆ†é’Ÿåƒé€Diffç®—æ³•æ ¸å¿ƒåŸç†</a></li><li><a href="/algorithm/%E7%AE%97%E6%B3%95%E8%BF%9B%E9%98%B6/" aria-current="page" class="sidebar-link">ç®—æ³•è¿›é˜¶</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/ä¸€çœ‹å°±æ‡‚çš„é˜Ÿåˆ—åŠé…å¥—ç®—æ³•é¢˜.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•6ï¼šä¸€çœ‹å°±æ‡‚çš„é˜Ÿåˆ—åŠé…å¥—ç®—æ³•é¢˜</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/ä»æµè§ˆå™¨ç¼“å­˜æ·˜æ±°ç­–ç•¥å’ŒVueçš„keep-aliveå­¦ä¹ LRUç®—æ³•.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•3ï¼šä»æµè§ˆå™¨ç¼“å­˜æ·˜æ±°ç­–ç•¥å’ŒVueçš„keep-aliveå­¦ä¹ LRUç®—æ³•</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/åˆ«å†è¯´ä½ ä¸æ‡‚Top-Ké—®é¢˜äº†.html" class="sidebar-link">åˆ«å†è¯´ä½ ä¸æ‡‚Top Ké—®é¢˜äº†</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å»å¤§å‚é¢è¯•é—®æˆ‘ç®—æ³•.html" class="sidebar-link">å»å¤§å‚é¢è¯•é—®æˆ‘ç®—æ³•ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/åŠæ‰“é¢è¯•å®˜ä¹‹æ•°æ®ç»“æ„æ ˆ.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•5ï¼šåŠæ‰“é¢è¯•å®˜ä¹‹æ•°æ®ç»“æ„æ ˆï¼ˆ+leetcodeåˆ·é¢˜ï¼‰</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å †æ’åº.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•ï¼šçœ‹å®Œè¿™ç¯‡ï¼Œå†ä¹Ÿä¸æ€•å †æ’åºã€Top Kã€ä¸­ä½æ•°é—®é¢˜é¢è¯•äº†</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å¤´æ¡æ­£åœ¨é¢çš„å“ˆå¸Œè¡¨é—®é¢˜.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•ï¼šå¤´æ¡æ­£åœ¨é¢çš„å“ˆå¸Œè¡¨é—®é¢˜</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å¦‚ä½•åˆ†æ-ç»Ÿè®¡ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡å’Œèµ„æºæ¶ˆè€—.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•1ï¼šå¦‚ä½•åˆ†æã€ç»Ÿè®¡ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡å’Œèµ„æºæ¶ˆè€—ï¼Ÿ</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å°ç™½éƒ½å¯ä»¥çœ‹æ‡‚çš„æ ‘ä¸äºŒå‰æ ‘.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•7ï¼šå°ç™½éƒ½å¯ä»¥çœ‹æ‡‚çš„æ ‘ä¸äºŒå‰æ ‘</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å¸¦ä½ å¿«é€Ÿå…¥é—¨å‰ç«¯ç®—æ³•.html" class="sidebar-link">10 é—® 10 ç­”ï¼Œå¸¦ä½ å¿«é€Ÿå…¥é—¨å‰ç«¯ç®—æ³•</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/å¸¸è§ç®—æ³•é¢˜åŠå®Œç¾é¢˜è§£.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•ï¼šå¸¸è§ç®—æ³•é¢˜åŠå®Œç¾é¢˜è§£</a></li><li><a href="/algorithm/ç®—æ³•è¿›é˜¶/é“¾è¡¨åŸæ¥å¦‚æ­¤ç®€å•.html" class="sidebar-link">å‰ç«¯è¿›é˜¶ç®—æ³•4ï¼šé“¾è¡¨åŸæ¥å¦‚æ­¤ç®€å•(+leetcodeåˆ·é¢˜ï¼‰</a></li></ul></section></li><li><a href="/algorithm/è´ªå¿ƒ.html" class="sidebar-link">å‰ç«¯ä¹Ÿèƒ½å­¦ç®—æ³•ï¼šç”±æµ…å…¥æ·±è®²è§£è´ªå¿ƒç®—æ³•</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="diffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘"><a href="#diffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘" class="header-anchor">#</a> DIffç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥é”¤æˆ‘</h1> <blockquote><p><a href="https://mp.weixin.qq.com/s/vAt4oCMwa8Bsd3Wb2YfrYg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/vAt4oCMwa8Bsd3Wb2YfrYg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h1 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h1> <p>é¢è¯•å®˜:&quot;ä½ äº†è§£<code>è™šæ‹ŸDOM(Virtual DOM)</code>è·Ÿ<code>Diffç®—æ³•</code>å—,è¯·æè¿°ä¸€ä¸‹å®ƒä»¬&quot;;</p> <p>æˆ‘:&quot;é¢,...é¹…,é‚£ä¸ª&quot;,å®Œäº†ğŸ˜°,çªç„¶æ™ºå•†ä¸åœ¨çº¿,æ²¡ç»„ç»‡å¥½è¯­è¨€æ²¡ç­”å¥½æˆ–è€…å‹æ ¹å°±ç­”ä¸å‡ºæ¥;</p> <p>æ‰€ä»¥è¿™æ¬¡æˆ‘æ€»ç»“ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ç‚¹,è®©ä½ å¯ä»¥æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤çŸ¥ä¹‹ä½™ä¹Ÿä¼šè®©ä½ åœ¨ä»Šåé‡åˆ°è¿™ç§æƒ…å†µå¯ä»¥<strong>å¦ç„¶è‡ªè‹¥,åº”ä»˜è‡ªå¦‚,æ¸¸åˆƒæœ‰ä½™</strong>:</p> <hr> <h2 id="ç›¸å…³çŸ¥è¯†ç‚¹"><a href="#ç›¸å…³çŸ¥è¯†ç‚¹" class="header-anchor">#</a> ç›¸å…³çŸ¥è¯†ç‚¹:</h2> <ul><li><p>è™šæ‹ŸDOM(Virtual DOM):</p></li> <li><ul><li><strong>ä»€ä¹ˆæ˜¯è™šæ‹Ÿdom</strong></li> <li><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿdom</strong></li> <li>è™šæ‹ŸDOMåº“</li></ul></li> <li><p>DIFFç®—æ³•:</p></li> <li><ul><li>initå‡½æ•°</li> <li>hå‡½æ•°</li> <li><strong>patchå‡½æ•°</strong></li> <li><strong>patchVnodeå‡½æ•°</strong></li> <li><strong>updateChildrenå‡½æ•°</strong></li> <li>snabbDomæºç </li></ul></li></ul> <hr> <h2 id="è™šæ‹Ÿdom-virtual-dom"><a href="#è™šæ‹Ÿdom-virtual-dom" class="header-anchor">#</a> è™šæ‹ŸDOM(Virtual DOM)</h2> <h3 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿdom"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿdom" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯è™šæ‹ŸDOM</h3> <p>ä¸€å¥è¯æ€»ç»“è™šæ‹ŸDOMå°±æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°çœŸå®DOMçš„<strong>javaScriptå¯¹è±¡</strong>,è¿™æ ·è¯´å¯èƒ½ä¸å¤Ÿå½¢è±¡,é‚£æˆ‘ä»¬æ¥ä¸¾ä¸ªğŸŒ°:åˆ†åˆ«ç”¨ä»£ç æ¥æè¿°<code>çœŸå®DOM</code>ä»¥åŠ<code>è™šæ‹ŸDOM</code></p> <p><code>çœŸå®DOM</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ul class=&quot;list&quot;&gt;
    &lt;li&gt;a&lt;/li&gt;
    &lt;li&gt;b&lt;/li&gt;
    &lt;li&gt;c&lt;/li&gt;
&lt;/ul&gt;
å¤åˆ¶ä»£ç 
</code></pre></div><p><code>å¯¹åº”çš„è™šæ‹ŸDOM</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>let vnode = h('ul.list', [
  h('li','a'),
  h('li','b'),
  h('li','c'),
])

console.log(vnode)
å¤åˆ¶ä»£ç 
</code></pre></div><h4 id="æ§åˆ¶å°æ‰“å°å‡ºæ¥çš„vnode"><a href="#æ§åˆ¶å°æ‰“å°å‡ºæ¥çš„vnode" class="header-anchor">#</a> æ§åˆ¶å°æ‰“å°å‡ºæ¥çš„<strong>Vnode</strong>:</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLfDQbT3YnicB8GCBnDpF4K3uCL9yt7F05tKuwS1kxMIrAkLcCic7zK2Dw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <h4 id="hå‡½æ•°ç”Ÿæˆçš„è™šæ‹Ÿdomè¿™ä¸ªjså¯¹è±¡-vnode-çš„æºç "><a href="#hå‡½æ•°ç”Ÿæˆçš„è™šæ‹Ÿdomè¿™ä¸ªjså¯¹è±¡-vnode-çš„æºç " class="header-anchor">#</a> hå‡½æ•°ç”Ÿæˆçš„è™šæ‹ŸDOMè¿™ä¸ªJSå¯¹è±¡(Vnode)çš„æºç :</h4> <div class="language- extra-class"><pre class="language-text"><code>export interface VNodeData {
    props?: Props
    attrs?: Attrs
    class?: Classes
    style?: VNodeStyle
    dataset?: Dataset
    on?: On
    hero?: Hero
    attachData?: AttachData
    hook?: Hooks
    key?: Key
    ns?: string // for SVGs
    fn?: () =&gt; VNode // for thunks
    args?: any[] // for thunks
    [key: string]: any // for any other 3rd party module
}

export type Key = string | number

const interface VNode = {
    sel: string | undefined, // é€‰æ‹©å™¨
    data: VNodeData | undefined, // VNodeDataä¸Šé¢å®šä¹‰çš„VNodeData
    children: Array&lt;VNode | string&gt; | undefined, //å­èŠ‚ç‚¹,ä¸textäº’æ–¥
    text: string | undefined, // æ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬å†…å®¹
    elm: Node | undefined, // è½¬æ¢è€Œæˆçš„çœŸå®DOM
    key: Key | undefined // å­—ç¬¦ä¸²æˆ–è€…æ•°å­—
}

å¤åˆ¶ä»£ç 
</code></pre></div><h5 id="è¡¥å……"><a href="#è¡¥å……" class="header-anchor">#</a> è¡¥å……:</h5> <p>ä¸Šé¢çš„hå‡½æ•°å¤§å®¶å¯èƒ½æœ‰ç‚¹ç†Ÿæ‚‰çš„æ„Ÿè§‰ä½†æ˜¯ä¸€æ—¶é—´ä¹Ÿæ²¡æƒ³èµ·æ¥,æ²¡å…³ç³»æˆ‘æ¥å¸®å¤§ä¼™å›å¿†; <code>å¼€å‘ä¸­å¸¸è§çš„ç°å®åœºæ™¯,renderå‡½æ•°æ¸²æŸ“</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>// æ¡ˆä¾‹1 vueé¡¹ç›®ä¸­çš„main.jsçš„åˆ›å»ºvueå®ä¾‹
new Vue({
  router,
  store,
  render: h =&gt; h(App)
}).$mount(&quot;#app&quot;);

//æ¡ˆä¾‹2 åˆ—è¡¨ä¸­ä½¿ç”¨renderæ¸²æŸ“
columns: [
    {
        title: &quot;æ“ä½œ&quot;,
        key: &quot;action&quot;,
        width: 150,
        render: (h, params) =&gt; {
            return h('div', [
                h('Button', {
                    props: {
                        size: 'small'
                    },
                    style: {
                        marginRight: '5px',
                        marginBottom: '5px',
                    },
                    on: {
                        click: () =&gt; {
                            this.toEdit(params.row.uuid);
                        }
                    }
                }, 'ç¼–è¾‘')
            ]);
        }
    }
]
å¤åˆ¶ä»£ç 
</code></pre></div><hr> <h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿdom"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿdom" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹ŸDOM</h3> <ul><li><p>MVVMæ¡†æ¶è§£å†³è§†å›¾å’ŒçŠ¶æ€åŒæ­¥é—®é¢˜</p></li> <li><p>æ¨¡æ¿å¼•æ“å¯ä»¥ç®€åŒ–è§†å›¾æ“ä½œ,æ²¡åŠæ³•è·Ÿè¸ªçŠ¶æ€</p></li> <li><p>è™šæ‹ŸDOMè·Ÿè¸ªçŠ¶æ€å˜åŒ–</p></li> <li><p>å‚è€ƒgithubä¸Š<strong>virtual-dom</strong>[1]çš„åŠ¨æœºæè¿°</p></li> <li><ul><li>è™šæ‹ŸDOMå¯ä»¥ç»´æŠ¤ç¨‹åºçš„çŠ¶æ€,è·Ÿè¸ªä¸Šä¸€æ¬¡çš„çŠ¶æ€</li> <li>é€šè¿‡æ¯”è¾ƒå‰åä¸¤æ¬¡çŠ¶æ€å·®å¼‚æ›´æ–°çœŸå®DOM</li></ul></li> <li><p>è·¨å¹³å°ä½¿ç”¨</p></li> <li><ul><li>æµè§ˆå™¨å¹³å°æ¸²æŸ“DOM</li> <li>æœåŠ¡ç«¯æ¸²æŸ“SSR(Nuxt.js/Next.js),å‰ç«¯æ˜¯vueå‘,åè€…æ˜¯reactå‘</li> <li>åŸç”Ÿåº”ç”¨(Weex/React Native)</li> <li>å°ç¨‹åº(mpvue/uni-app)ç­‰</li></ul></li> <li><p>çœŸå®DOMçš„å±æ€§å¾ˆå¤šï¼Œåˆ›å»ºDOMèŠ‚ç‚¹å¼€é”€å¾ˆå¤§</p></li> <li><p>è™šæ‹ŸDOMåªæ˜¯æ™®é€šJavaScriptå¯¹è±¡ï¼Œæè¿°å±æ€§å¹¶ä¸éœ€è¦å¾ˆå¤šï¼Œåˆ›å»ºå¼€é”€å¾ˆå°</p></li> <li><p><strong>å¤æ‚è§†å›¾æƒ…å†µä¸‹æå‡æ¸²æŸ“æ€§èƒ½</strong>(æ“ä½œdomæ€§èƒ½æ¶ˆè€—å¤§,å‡å°‘æ“ä½œdomçš„èŒƒå›´å¯ä»¥æå‡æ€§èƒ½)</p></li></ul> <p><strong>çµé­‚å‘é—®</strong>:ä½¿ç”¨äº†è™šæ‹ŸDOMå°±ä¸€å®šä¼šæ¯”ç›´æ¥æ¸²æŸ“çœŸå®DOMå¿«å—?ç­”æ¡ˆå½“ç„¶æ˜¯<code>å¦å®š</code>çš„,ä¸”å¬æˆ‘è¯´:<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLOqRQpVxXrpsrQicImZicauU14gEaQsytr9ctPwnribnp8RumzfVibLJ5TA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡"></p> <p><strong>ä¸¾ä¾‹</strong>:å½“ä¸€ä¸ªèŠ‚ç‚¹å˜æ›´æ—¶DOMA-&gt;DOMB</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLMicqWYBn2NDILaboY0599tJPkaaOl2fJKJIScBrdjmUcGP20MxJgmRQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">ä¸Šè¿°æƒ…å†µ: <code>ç¤ºä¾‹1</code>æ˜¯åˆ›å»ºä¸€ä¸ª<code>DOMB</code>ç„¶åæ›¿æ¢æ‰<code>DOMA</code>; <code>ç¤ºä¾‹2</code>å»<code>åˆ›å»ºè™šæ‹ŸDOM+DIFFç®—æ³•</code>æ¯”å¯¹å‘ç°<code>DOMB</code>è·Ÿ<code>DOMA</code>ä¸æ˜¯ç›¸åŒçš„èŠ‚ç‚¹,æœ€åè¿˜æ˜¯åˆ›å»ºä¸€ä¸ª<code>DOMB</code>ç„¶åæ›¿æ¢æ‰<code>DOMA</code>; å¯ä»¥æ˜æ˜¾çœ‹å‡º1æ˜¯æ›´å¿«çš„,åŒæ ·çš„ç»“æœ,2è¿˜è¦å»åˆ›å»ºè™šæ‹ŸDOM+DIFFç®—å•Šå¯¹æ¯” æ‰€ä»¥è¯´ä½¿ç”¨è™šæ‹ŸDOMæ¯”ç›´æ¥æ“ä½œçœŸå®DOMå°±ä¸€å®šè¦å¿«è¿™ä¸ªè¯´æ³•æ˜¯<code>é”™è¯¯çš„,ä¸ä¸¥è°¨çš„</code></p> <p><strong>ä¸¾ä¾‹</strong>:å½“DOMæ ‘é‡Œé¢çš„æŸä¸ªå­èŠ‚ç‚¹çš„å†…å®¹å˜æ›´æ—¶:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLawXVuJrQgyv2RIt2c8XXFPADLfbDMJ55ibzBib36sAbTLXv6Qgg2sySQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">å½“ä¸€äº›å¤æ‚çš„èŠ‚ç‚¹,æ¯”å¦‚è¯´ä¸€ä¸ªçˆ¶èŠ‚ç‚¹é‡Œé¢æœ‰å¤šä¸ªå­èŠ‚ç‚¹,å½“åªæ˜¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„å†…å®¹å‘ç”Ÿäº†æ”¹å˜,é‚£ä¹ˆæˆ‘ä»¬æ²¡æœ‰å¿…è¦åƒ<code>ç¤ºä¾‹1</code>é‡æ–°å»æ¸²æŸ“è¿™ä¸ª<code>DOMæ ‘</code>,è¿™ä¸ªæ—¶å€™<code>è™šæ‹ŸDOM+DIFFç®—æ³•</code>å°±èƒ½å¤Ÿå¾—åˆ°å¾ˆå¥½çš„ä½“ç°,æˆ‘ä»¬é€šè¿‡<code>ç¤ºä¾‹2</code>ä½¿ç”¨<code>è™šæ‹ŸDOM+Diffç®—æ³•</code>å»æ‰¾å‡ºæ”¹å˜äº†çš„å­èŠ‚ç‚¹æ›´æ–°å®ƒçš„å†…å®¹å°±å¯ä»¥äº†</p> <p>æ€»ç»“:<strong>å¤æ‚è§†å›¾æƒ…å†µä¸‹æå‡æ¸²æŸ“æ€§èƒ½</strong>,å› ä¸º<code>è™šæ‹ŸDOM+Diffç®—æ³•</code>å¯ä»¥ç²¾å‡†æ‰¾åˆ°DOMæ ‘å˜æ›´çš„åœ°æ–¹,å‡å°‘DOMçš„æ“ä½œ(é‡æ’é‡ç»˜)</p> <hr> <h3 id="è™šæ‹Ÿdomåº“"><a href="#è™šæ‹Ÿdomåº“" class="header-anchor">#</a> è™šæ‹Ÿdomåº“</h3> <ul><li><p><strong>Snabbdom</strong>[2]</p></li> <li><ul><li>Vue.js2.xå†…éƒ¨ä½¿ç”¨çš„è™šæ‹ŸDOMå°±æ˜¯æ”¹é€ çš„Snabbdom</li> <li>å¤§çº¦200SLOC(single line of code)</li> <li>é€šè¿‡æ¨¡å—å¯æ‰©å±•</li> <li>æºç ä½¿ç”¨TypeScriptå¼€å‘</li> <li>æœ€å¿«çš„Virtual DOMä¹‹ä¸€</li></ul></li> <li><p><strong>virtual-dom</strong>[3]</p></li></ul> <hr> <h2 id="diffç®—æ³•"><a href="#diffç®—æ³•" class="header-anchor">#</a> Diffç®—æ³•</h2> <p>åœ¨çœ‹å®Œä¸Šè¿°çš„æ–‡ç« ä¹‹åç›¸ä¿¡å¤§å®¶å·²ç»å¯¹Diffç®—æ³•æœ‰ä¸€ä¸ªåˆæ­¥çš„æ¦‚å¿µ,æ²¡é”™,Diffç®—æ³•å…¶å®å°±æ˜¯æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚;</p> <blockquote><p>diff ç®—æ³•é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯ Diff çš„å¯¹è±¡æ˜¯è™šæ‹ŸDOMï¼ˆvirtual domï¼‰ï¼Œæ›´æ–°çœŸå® DOM æ˜¯ Diff ç®—æ³•çš„ç»“æœã€‚</p></blockquote> <p>ä¸‹é¢æˆ‘å°†ä¼šæ‰‹æ’•<code>snabbdom</code>æºç æ ¸å¿ƒéƒ¨åˆ†ä¸ºå¤§å®¶æ‰“å¼€<code>Diff</code>çš„å¿ƒ,ç»™ç‚¹è€å¿ƒ,åˆ«å…³ç½‘é¡µ,æˆ‘çŸ¥é“ä½ ä»¬éƒ½æ˜¯è¿™æ ·:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLmiaaGkkBAmSsUpkaFzPL6DXA5wPrSePTiajHt6GbtZjs6gQvdRUlhwdA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">src=http___img.wxcha.com_file_201905_17_f5a4d33d48.jpg&amp;refer=http___img.wxcha.jpeg</p> <hr> <h2 id="snabbdomçš„æ ¸å¿ƒ"><a href="#snabbdomçš„æ ¸å¿ƒ" class="header-anchor">#</a> snabbdomçš„æ ¸å¿ƒ</h2> <ul><li><code>init()</code>è®¾ç½®æ¨¡å—.åˆ›å»º<code>patch()</code>å‡½æ•°</li> <li>ä½¿ç”¨<code>h()</code>å‡½æ•°åˆ›å»ºJavaScriptå¯¹è±¡<code>(Vnode)</code>æè¿°<code>çœŸå®DOM</code></li> <li><code>patch()</code>æ¯”è¾ƒ<code>æ–°æ—§ä¸¤ä¸ªVnode</code></li> <li>æŠŠå˜åŒ–çš„å†…å®¹æ›´æ–°åˆ°<code>çœŸå®DOMæ ‘</code></li></ul> <h3 id="initå‡½æ•°"><a href="#initå‡½æ•°" class="header-anchor">#</a> initå‡½æ•°</h3> <p>initå‡½æ•°æ—¶è®¾ç½®æ¨¡å—,ç„¶ååˆ›å»ºpatch()å‡½æ•°,æˆ‘ä»¬å…ˆé€šè¿‡åœºæ™¯æ¡ˆä¾‹æ¥æœ‰ä¸€ä¸ªç›´è§‚çš„ä½“ç°:</p> <div class="language- extra-class"><pre class="language-text"><code>import {init} from 'snabbdom/build/package/init.js'
import {h} from 'snabbdom/build/package/h.js'

// 1.å¯¼å…¥æ¨¡å—
import {styleModule} from &quot;snabbdom/build/package/modules/style&quot;;
import {eventListenersModule} from &quot;snabbdom/build/package/modules/eventListeners&quot;;

// 2.æ³¨å†Œæ¨¡å—
const patch = init([
  styleModule,
  eventListenersModule
])

// 3.ä½¿ç”¨h()å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¨¡å—ä¸­ä½¿ç”¨çš„æ•°æ®(å¯¹è±¡)
let vnode = h('div', [
  h('h1', {style: {backgroundColor: 'red'}}, 'Hello world'),
  h('p', {on: {click: eventHandler}}, 'Hello P')
])

function eventHandler() {
  alert('ç–¼,åˆ«æ‘¸æˆ‘')
}

const app = document.querySelector('#app')

patch(app,vnode)
å¤åˆ¶ä»£ç 
</code></pre></div><p>å½“initä½¿ç”¨äº†å¯¼å…¥çš„æ¨¡å—å°±èƒ½å¤Ÿåœ¨hå‡½æ•°ä¸­ç”¨è¿™äº›æ¨¡å—æä¾›çš„apiå»åˆ›å»º<code>è™šæ‹ŸDOM(Vnode)å¯¹è±¡</code>;åœ¨ä¸Šæ–‡ä¸­å°±ä½¿ç”¨äº†<code>æ ·å¼æ¨¡å—</code>ä»¥åŠ<code>äº‹ä»¶æ¨¡å—</code>è®©åˆ›å»ºçš„è¿™ä¸ªè™šæ‹ŸDOMå…·å¤‡æ ·å¼å±æ€§ä»¥åŠäº‹ä»¶å±æ€§,æœ€ç»ˆé€šè¿‡<code>patchå‡½æ•°</code>å¯¹æ¯”<code>ä¸¤ä¸ªè™šæ‹Ÿdom</code>(ä¼šå…ˆæŠŠappè½¬æ¢æˆè™šæ‹Ÿdom),æ›´æ–°è§†å›¾;</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLaFBls2pciaaK7XfSjuKBuTicUq5wUUmX7tF5BSPF0Hr8bruzUMSjt3Tw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p>æˆ‘ä»¬å†ç®€å•çœ‹çœ‹initçš„æºç éƒ¨åˆ†:</p> <div class="language- extra-class"><pre class="language-text"><code>// src/package/init.ts
/* ç¬¬ä¸€å‚æ•°å°±æ˜¯å„ä¸ªæ¨¡å—
   ç¬¬äºŒå‚æ•°å°±æ˜¯DOMAPI,å¯ä»¥æŠŠDOMè½¬æ¢æˆåˆ«çš„å¹³å°çš„API,
ä¹Ÿå°±æ˜¯è¯´æ”¯æŒè·¨å¹³å°ä½¿ç”¨,å½“ä¸ä¼ çš„æ—¶å€™é»˜è®¤æ˜¯htmlDOMApi,è§ä¸‹æ–‡
   initæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°,ä¸€ä¸ªå‡½æ•°è¿”å›å¦å¤–ä¸€ä¸ªå‡½æ•°,å¯ä»¥ç¼“å­˜modules,ä¸domApiä¸¤ä¸ªå‚æ•°,
é‚£ä¹ˆä»¥åç›´æ¥åªä¼ oldValueè·ŸnewValue(vnode)å°±å¯ä»¥äº†*/
export function init (modules: Array&lt;Partial&lt;Module&gt;&gt;, domApi?: DOMAPI) {

...

return function patch (oldVnode: VNode | Element, vnode: VNode): VNode {}
}
å¤åˆ¶ä»£ç 
</code></pre></div><hr> <h3 id="hå‡½æ•°"><a href="#hå‡½æ•°" class="header-anchor">#</a> hå‡½æ•°</h3> <p>äº›åœ°æ–¹ä¹Ÿä¼šç”¨<code>createElement</code>æ¥å‘½å,å®ƒä»¬æ˜¯ä¸€æ ·çš„ä¸œè¥¿,éƒ½æ˜¯åˆ›å»º<code>è™šæ‹ŸDOM</code>çš„,åœ¨ä¸Šè¿°æ–‡ç« ä¸­ç›¸ä¿¡å¤§ä¼™å·²ç»å¯¹hå‡½æ•°æœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£å¹¶ä¸”å·²ç»è”æƒ³äº†ä½¿ç”¨åœºæ™¯,å°±ä¸ä½œåœºæ™¯æ¡ˆä¾‹ä»‹ç»äº†,ç›´æ¥ä¸Šæºç éƒ¨åˆ†:</p> <div class="language- extra-class"><pre class="language-text"><code>// hå‡½æ•°
export function h (sel: string): VNode
export function h (sel: string, data: VNodeData | null): VNode
export function h (sel: string, children: VNodeChildren): VNode
export function h (sel: string, data: VNodeData | null, children: VNodeChildren): VNode
export function h (sel: any, b?: any, c?: any): VNode {
  var data: VNodeData = {}
  var children: any
  var text: any
  var i: number
    ...
  return vnode(sel, data, children, text, undefined) //æœ€ç»ˆè¿”å›ä¸€ä¸ªvnodeå‡½æ•°
};
å¤åˆ¶ä»£ç 
// vnodeå‡½æ•°
export function vnode (sel: string | undefined,
  data: any | undefined,
  children: Array&lt;VNode | string&gt; | undefined,
  text: string | undefined,
  elm: Element | Text | undefined): VNode {
  const key = data === undefined ? undefined : data.key
  return { sel, data, children, text, elm, key } //æœ€ç»ˆç”ŸæˆVnodeå¯¹è±¡
}
å¤åˆ¶ä»£ç 
</code></pre></div><p><strong>æ€»ç»“</strong>:<code>hå‡½æ•°</code>å…ˆç”Ÿæˆä¸€ä¸ª<code>vnode</code>å‡½æ•°,ç„¶å<code>vnode</code>å‡½æ•°å†ç”Ÿæˆä¸€ä¸ª<code>Vnode</code>å¯¹è±¡(è™šæ‹ŸDOMå¯¹è±¡)</p> <h4 id="è¡¥å……-2"><a href="#è¡¥å……-2" class="header-anchor">#</a> è¡¥å……:</h4> <p>åœ¨hå‡½æ•°æºç éƒ¨åˆ†æ¶‰åŠä¸€ä¸ª<code>å‡½æ•°é‡è½½</code>çš„æ¦‚å¿µ,ç®€å•è¯´æ˜ä¸€ä¸‹:</p> <ul><li>å‚æ•°ä¸ªæ•°æˆ–å‚æ•°ç±»å‹ä¸åŒçš„å‡½æ•°()</li> <li>JavaScriptä¸­æ²¡æœ‰é‡è½½çš„æ¦‚å¿µ</li> <li>TypeScriptä¸­æœ‰é‡è½½,ä¸è¿‡é‡è½½çš„å®ç°è¿˜æ˜¯é€šè¿‡ä»£ç è°ƒæ•´å‚æ•°</li></ul> <blockquote><p>é‡è½½è¿™ä¸ªæ¦‚å¿µä¸ªå‚æ•°ç›¸å…³,å’Œè¿”å›å€¼æ— å…³</p></blockquote> <ul><li>å®ä¾‹1(å‡½æ•°é‡è½½-å‚æ•°ä¸ªæ•°)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function add(a:number,b:number){

console.log(a+b)

}

function add(a:number,b:number,c:number){

console.log(a+b+c)

}

add(1,2)

add(1,2,3)

å¤åˆ¶ä»£ç 
</code></pre></div><ul><li>å®ä¾‹2(å‡½æ•°é‡è½½-å‚æ•°ç±»å‹)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function add(a:number,b:number){

console.log(a+b)

}

function add(a:number,b:string){

console.log(a+b)

}

add(1,2)

add(1,'2')

å¤åˆ¶ä»£ç 
</code></pre></div><hr> <h3 id="patchå‡½æ•°-æ ¸å¿ƒ"><a href="#patchå‡½æ•°-æ ¸å¿ƒ" class="header-anchor">#</a> patchå‡½æ•°(æ ¸å¿ƒ)</h3> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLdMiaEDJ8ZsO8A93InplfPM97XWqSnm6Y3nLH4QwOdVyqrwpVvJP5VJg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">src=http___shp.qpic.cn_qqvideo_ori_0_e3012t7v643_496_280_0&amp;refer=http___shp.qpic.jpeg</p> <p>è¦æ˜¯çœ‹å®Œå‰é¢çš„é“ºå«,çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½èµ°ç¥äº†,<code>é†’é†’å•Š,è¿™æ˜¯æ ¸å¿ƒå•Š,ä¸Šé«˜åœ°äº†å…„å¼Ÿ</code>;</p> <ul><li>pactch(oldVnode,newVnode)</li> <li>æŠŠæ–°èŠ‚ç‚¹ä¸­å˜åŒ–çš„å†…å®¹æ¸²æŸ“åˆ°çœŸå®DOM,æœ€åè¿”å›æ–°èŠ‚ç‚¹ä½œä¸ºä¸‹ä¸€æ¬¡å¤„ç†çš„æ—§èŠ‚ç‚¹(æ ¸å¿ƒ)</li> <li>å¯¹æ¯”æ–°æ—§<code>VNode</code>æ˜¯å¦ç›¸åŒèŠ‚ç‚¹(èŠ‚ç‚¹çš„keyå’Œselç›¸åŒ)</li> <li>å¦‚æœä¸æ˜¯ç›¸åŒèŠ‚ç‚¹,åˆ é™¤ä¹‹å‰çš„å†…å®¹,é‡æ–°æ¸²æŸ“</li> <li>å¦‚æœæ˜¯ç›¸åŒèŠ‚ç‚¹,å†åˆ¤æ–­æ–°çš„<code>VNode</code>æ˜¯å¦æœ‰<code>text</code>,å¦‚æœæœ‰å¹¶ä¸”å’Œ<code>oldVnode</code>çš„<code>text</code>ä¸åŒç›´æ¥æ›´æ–°æ–‡æœ¬å†…å®¹<code>(patchVnode)</code></li> <li>å¦‚æœæ–°çš„VNodeæœ‰children,åˆ¤æ–­å­èŠ‚ç‚¹æ˜¯å¦æœ‰å˜åŒ–<code>(updateChildren,æœ€éº»çƒ¦,æœ€éš¾å®ç°)</code></li></ul> <p>æºç :</p> <div class="language- extra-class"><pre class="language-text"><code>return function patch(oldVnode: VNode | Element, vnode: VNode): VNode {    
    let i: number, elm: Node, parent: Node
    const insertedVnodeQueue: VNodeQueue = []
    // cbs.preå°±æ˜¯æ‰€æœ‰æ¨¡å—çš„preé’©å­å‡½æ•°é›†åˆ
    for (i = 0; i &lt; cbs.pre.length; ++i) cbs.pre[i]()
    // isVnodeå‡½æ•°æ—¶åˆ¤æ–­oldVnodeæ˜¯å¦æ˜¯ä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡
    if (!isVnode(oldVnode)) {
        // è‹¥ä¸æ˜¯å³æŠŠElementè½¬æ¢æˆä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡
        oldVnode = emptyNodeAt(oldVnode)
    }
    // sameVnodeå‡½æ•°ç”¨äºåˆ¤æ–­ä¸¤ä¸ªè™šæ‹ŸDOMæ˜¯å¦æ˜¯ç›¸åŒçš„,æºç è§è¡¥å……1;
    if (sameVnode(oldVnode, vnode)) {
        // ç›¸åŒåˆ™è¿è¡ŒpatchVnodeå¯¹æ¯”ä¸¤ä¸ªèŠ‚ç‚¹,å…³äºpatchVnodeåé¢ä¼šé‡ç‚¹è¯´æ˜(æ ¸å¿ƒ)
        patchVnode(oldVnode, vnode, insertedVnodeQueue)
    } else {
        elm = oldVnode.elm! // !æ˜¯tsçš„ä¸€ç§å†™æ³•ä»£ç oldVnode.elmè‚¯å®šæœ‰å€¼
        // parentNodeå°±æ˜¯è·å–çˆ¶å…ƒç´ 
        parent = api.parentNode(elm) as Node

        // createElmæ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªdomå…ƒç´ æ’å…¥åˆ°vnodeä¸­(æ–°çš„è™šæ‹ŸDOM)
        createElm(vnode, insertedVnodeQueue)

        if (parent !== null) {
            // æŠŠdomå…ƒç´ æ’å…¥åˆ°çˆ¶å…ƒç´ ä¸­,å¹¶ä¸”æŠŠæ—§çš„domåˆ é™¤
            api.insertBefore(parent, vnode.elm!, api.nextSibling(elm))// æŠŠæ–°åˆ›å»ºçš„å…ƒç´ æ”¾åœ¨æ—§çš„domåé¢
            removeVnodes(parent, [oldVnode], 0, 0)
        }
    }

    for (i = 0; i &lt; insertedVnodeQueue.length; ++i) {
        insertedVnodeQueue[i].data!.hook!.insert!(insertedVnodeQueue[i])
    }
    for (i = 0; i &lt; cbs.post.length; ++i) cbs.post[i]()
    return vnode
}
å¤åˆ¶ä»£ç 
</code></pre></div><h4 id="è¡¥å……1-samevnodeå‡½æ•°"><a href="#è¡¥å……1-samevnodeå‡½æ•°" class="header-anchor">#</a> è¡¥å……1: sameVnodeå‡½æ•°</h4> <div class="language- extra-class"><pre class="language-text"><code>function sameVnode(vnode1: VNode, vnode2: VNode): boolean { é€šè¿‡keyå’Œselé€‰æ‹©å™¨åˆ¤æ–­æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹
    return vnode1.key === vnode2.key &amp;&amp; vnode1.sel === vnode2.sel
}
å¤åˆ¶ä»£ç 
</code></pre></div><hr> <h3 id="patchvnode"><a href="#patchvnode" class="header-anchor">#</a> patchVnode</h3> <ul><li>ç¬¬ä¸€é˜¶æ®µè§¦å‘<code>prepatch</code>å‡½æ•°ä»¥åŠ<code>update</code>å‡½æ•°(éƒ½ä¼šè§¦å‘prepatchå‡½æ•°,ä¸¤è€…ä¸å®Œå…¨ç›¸åŒæ‰ä¼šè§¦å‘updateå‡½æ•°)</li> <li>ç¬¬äºŒé˜¶æ®µ,çœŸæ­£å¯¹æ¯”æ–°æ—§<code>vnode</code>å·®å¼‚çš„åœ°æ–¹</li> <li>ç¬¬ä¸‰é˜¶æ®µ,è§¦å‘<code>postpatch</code>å‡½æ•°æ›´æ–°èŠ‚ç‚¹</li></ul> <p>æºç :</p> <div class="language- extra-class"><pre class="language-text"><code>function patchVnode(oldVnode: VNode, vnode: VNode, insertedVnodeQueue: VNodeQueue) {
    const hook = vnode.data?.hook
    hook?.prepatch?.(oldVnode, vnode)
    const elm = vnode.elm = oldVnode.elm!
    const oldCh = oldVnode.children as VNode[]
    const ch = vnode.children as VNode[]
    if (oldVnode === vnode) return
    if (vnode.data !== undefined) {
        for (let i = 0; i &lt; cbs.update.length; ++i) cbs.update[i](oldVnode, vnode)
        vnode.data.hook?.update?.(oldVnode, vnode)
    }
    if (isUndef(vnode.text)) { // æ–°èŠ‚ç‚¹çš„textå±æ€§æ˜¯undefined
        if (isDef(oldCh) &amp;&amp; isDef(ch)) { // å½“æ–°æ—§èŠ‚ç‚¹éƒ½å­˜åœ¨å­èŠ‚ç‚¹
            if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue) //å¹¶ä¸”ä»–ä»¬çš„å­èŠ‚ç‚¹ä¸ç›¸åŒæ‰§è¡ŒupdateChildrenå‡½æ•°,åç»­ä¼šé‡ç‚¹è¯´æ˜(æ ¸å¿ƒ)
        } else if (isDef(ch)) { // åªæœ‰æ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹
            // å½“æ—§èŠ‚ç‚¹æœ‰textå±æ€§å°±ä¼šæŠŠ''èµ‹äºˆç»™çœŸå®domçš„textå±æ€§
            if (isDef(oldVnode.text)) api.setTextContent(elm, '') 
            // å¹¶ä¸”æŠŠæ–°èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹æ’å…¥åˆ°çœŸå®domä¸­
            addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue)
        } else if (isDef(oldCh)) { // æ¸…é™¤çœŸå®domçš„æ‰€æœ‰å­èŠ‚ç‚¹
            removeVnodes(elm, oldCh, 0, oldCh.length - 1)
        } else if (isDef(oldVnode.text)) { // æŠŠ''èµ‹äºˆç»™çœŸå®domçš„textå±æ€§
            api.setTextContent(elm, '')
        }
    } else if (oldVnode.text !== vnode.text) { //è‹¥æ—§èŠ‚ç‚¹çš„textä¸æ–°èŠ‚ç‚¹çš„textä¸ç›¸åŒ
        if (isDef(oldCh)) { // è‹¥æ—§èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹,å°±æŠŠæ‰€æœ‰çš„å­èŠ‚ç‚¹åˆ é™¤
            removeVnodes(elm, oldCh, 0, oldCh.length - 1)
        }
        api.setTextContent(elm, vnode.text!) // æŠŠæ–°èŠ‚ç‚¹çš„textèµ‹äºˆç»™çœŸå®dom
    }
    hook?.postpatch?.(oldVnode, vnode) // æ›´æ–°è§†å›¾
}
å¤åˆ¶ä»£ç 
</code></pre></div><p>çœ‹å¾—å¯èƒ½æœ‰ç‚¹è’™è”½,ä¸‹é¢å†ä¸Šä¸€å‰¯æ€ç»´å¯¼å›¾:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLHNVic3kCtibTYFxoJKuJxNsibX6CrbylKsKXUUoWAwAXfyxSCapNOJJUw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <hr> <h3 id="é¢˜å¤–è¯-diffç®—æ³•ç®€ä»‹"><a href="#é¢˜å¤–è¯-diffç®—æ³•ç®€ä»‹" class="header-anchor">#</a> é¢˜å¤–è¯:diffç®—æ³•ç®€ä»‹</h3> <p><strong>ä¼ ç»Ÿdiffç®—æ³•</strong></p> <ul><li>è™šæ‹ŸDOMä¸­çš„Diffç®—æ³•</li> <li><code>ä¼ ç»Ÿç®—æ³•</code>æŸ¥æ‰¾ä¸¤é¢—æ ‘æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·®å¼‚</li> <li>ä¼šè¿è¡Œn1(dom1çš„èŠ‚ç‚¹æ•°)*n2(dom2çš„èŠ‚ç‚¹æ•°)æ¬¡æ–¹å»å¯¹æ¯”,æ‰¾åˆ°å·®å¼‚çš„éƒ¨åˆ†å†å»æ›´æ–°</li></ul> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <p><strong>snabbdomçš„diffç®—æ³•ä¼˜åŒ–</strong></p> <ul><li>Snbbdomæ ¹æ®DOMçš„ç‰¹ç‚¹å¯¹ä¼ ç»Ÿçš„diffç®—æ³•åšäº†<code>ä¼˜åŒ–</code></li> <li>DOMæ“ä½œæ—¶å€™å¾ˆå°‘ä¼šè·¨çº§åˆ«æ“ä½œèŠ‚ç‚¹</li> <li>åªæ¯”è¾ƒ<code>åŒçº§åˆ«</code>çš„èŠ‚ç‚¹</li></ul> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLhTt5D51vDv7tKQJxPMIoJBiaZVnGVEyulmeDO6XoaOgg0wcAcfib0huw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLPiclzDgbxv9NeLzmfvHlj8c4nG4GyIC5ibnxSxj9iaAIibvQy6ic8kDcUdw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">src=http___img.wxcha.com_file_202004_03_1ed2e19e4f.jpg&amp;refer=http___img.wxcha.jpeg</p> <p>ä¸‹é¢æˆ‘ä»¬å°±ä¼šä»‹ç»<code>updateChildren</code>å‡½æ•°æ€ä¹ˆå»å¯¹æ¯”å­èŠ‚ç‚¹çš„<code>å¼‚åŒ</code>,ä¹Ÿæ˜¯<code>Diffç®—æ³•</code>é‡Œé¢çš„ä¸€ä¸ªæ ¸å¿ƒä»¥åŠéš¾ç‚¹;</p> <hr> <h3 id="updatechildren-æ ¸ä¸­æ ¸-åˆ¤æ–­å­èŠ‚ç‚¹çš„å·®å¼‚"><a href="#updatechildren-æ ¸ä¸­æ ¸-åˆ¤æ–­å­èŠ‚ç‚¹çš„å·®å¼‚" class="header-anchor">#</a> updateChildren(æ ¸ä¸­æ ¸:åˆ¤æ–­å­èŠ‚ç‚¹çš„å·®å¼‚)</h3> <ul><li>è¿™ä¸ªå‡½æ•°æˆ‘åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†,<code>éƒ¨åˆ†1:å£°æ˜å˜é‡</code>,<code>éƒ¨åˆ†2:åŒçº§åˆ«èŠ‚ç‚¹æ¯”è¾ƒ</code>,<code>éƒ¨åˆ†3:å¾ªç¯ç»“æŸçš„æ”¶å°¾å·¥ä½œ</code>(è§ä¸‹å›¾);</li></ul> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <ul><li><p><code>åŒçº§åˆ«èŠ‚ç‚¹æ¯”è¾ƒ</code>çš„<code>äº”ç§</code>æƒ…å†µ:</p></li> <li><ol><li><code>oldStartVnode/newStartVnode</code>(æ—§å¼€å§‹èŠ‚ç‚¹/æ–°å¼€å§‹èŠ‚ç‚¹)ç›¸åŒ</li> <li><code>oldEndVnode/newEndVnode</code>(æ—§ç»“æŸèŠ‚ç‚¹/æ–°ç»“æŸèŠ‚ç‚¹)ç›¸åŒ</li> <li><code>oldStartVnode/newEndVnode</code>(æ—§å¼€å§‹èŠ‚ç‚¹/æ–°ç»“æŸèŠ‚ç‚¹)ç›¸åŒ</li> <li><code>oldEndVnode/newStartVnode</code>(æ—§ç»“æŸèŠ‚ç‚¹/æ–°å¼€å§‹èŠ‚ç‚¹)ç›¸åŒ</li> <li><code>ç‰¹æ®Šæƒ…å†µå½“1,2,3,4çš„æƒ…å†µéƒ½ä¸ç¬¦åˆ</code>çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ,åœ¨<code>oldVnodes</code>é‡Œé¢å¯»æ‰¾è·Ÿ<code>newStartVnode</code>ä¸€æ ·çš„èŠ‚ç‚¹ç„¶åä½ç§»åˆ°<code>oldStartVnode</code>,è‹¥æ²¡æœ‰æ‰¾åˆ°åœ¨å°±<code>oldStartVnode</code>åˆ›å»ºä¸€ä¸ª</li></ol></li> <li><p>æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªç¯,åœ¨æ¯æ¬¡å¾ªç¯é‡Œ,åªè¦æ‰§è¡Œäº†ä¸Šè¿°çš„æƒ…å†µçš„äº”ç§ä¹‹ä¸€å°±ä¼šç»“æŸä¸€æ¬¡å¾ªç¯</p></li> <li><p><code>å¾ªç¯ç»“æŸçš„æ”¶å°¾å·¥ä½œ</code>:ç›´åˆ°oldStartIdx&gt;oldEndIdx || newStartIdx&gt;newEndIdx(ä»£è¡¨æ—§èŠ‚ç‚¹æˆ–è€…æ–°èŠ‚ç‚¹å·²ç»éå†å®Œ)</p></li></ul> <p>ä¸ºäº†æ›´åŠ ç›´è§‚çš„äº†è§£,æˆ‘ä»¬å†æ¥çœ‹çœ‹<code>åŒçº§åˆ«èŠ‚ç‚¹æ¯”è¾ƒ</code>çš„<code>äº”ç§</code>æƒ…å†µçš„å®ç°ç»†èŠ‚:</p> <h4 id="æ–°å¼€å§‹èŠ‚ç‚¹å’Œæ—§å¼€å§‹èŠ‚ç‚¹-æƒ…å†µ1"><a href="#æ–°å¼€å§‹èŠ‚ç‚¹å’Œæ—§å¼€å§‹èŠ‚ç‚¹-æƒ…å†µ1" class="header-anchor">#</a> æ–°å¼€å§‹èŠ‚ç‚¹å’Œæ—§å¼€å§‹èŠ‚ç‚¹(æƒ…å†µ1)</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGL0FukiaVosSclGTu0CVmzFnDl25vU2xDfGFqrdib1ApyMxbicfJHU7hxoQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li>è‹¥<code>æƒ…å†µ1ç¬¦åˆ:(ä»æ–°æ—§èŠ‚ç‚¹çš„å¼€å§‹èŠ‚ç‚¹å¼€å§‹å¯¹æ¯”</code>,<code>oldCh[oldStartIdx]å’ŒnewCh[newStartIdx]</code>è¿›è¡Œ<code>sameVnode(keyå’Œselç›¸åŒ)</code>åˆ¤æ–­æ˜¯å¦ç›¸åŒèŠ‚ç‚¹)</li> <li>åˆ™æ‰§è¡Œ<code>patchVnode</code>æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚,æ›´æ–°å›¾;å¦‚æ²¡æœ‰å·®å¼‚åˆ™ä»€ä¹ˆéƒ½ä¸æ“ä½œ,ç»“æŸä¸€æ¬¡å¾ªç¯</li> <li><code>oldStartIdx++/newStartIdx++</code></li></ul> <h4 id="æ–°ç»“æŸèŠ‚ç‚¹å’Œæ—§ç»“æŸèŠ‚ç‚¹-æƒ…å†µ2"><a href="#æ–°ç»“æŸèŠ‚ç‚¹å’Œæ—§ç»“æŸèŠ‚ç‚¹-æƒ…å†µ2" class="header-anchor">#</a> æ–°ç»“æŸèŠ‚ç‚¹å’Œæ—§ç»“æŸèŠ‚ç‚¹(æƒ…å†µ2)</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLVLrlUWMxPpwEeGcyyqNlav4kQ39b67C6udVcSBVQMUCbJ2cQuy2Mrw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li>è‹¥<code>æƒ…å†µ1ä¸ç¬¦åˆ</code>å°±åˆ¤æ–­<code>æƒ…å†µ2</code>,è‹¥ç¬¦åˆ:(ä»æ–°æ—§èŠ‚ç‚¹çš„ç»“æŸèŠ‚ç‚¹å¼€å§‹å¯¹æ¯”,<code>oldCh[oldEndIdx]å’ŒnewCh[newEndIdx]</code>å¯¹æ¯”,æ‰§è¡Œ<code>sameVnode(keyå’Œselç›¸åŒ)</code>åˆ¤æ–­æ˜¯å¦ç›¸åŒèŠ‚ç‚¹)</li> <li>æ‰§è¡Œ<code>patchVnode</code>æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚,æ›´æ–°è§†å›¾,;å¦‚æ²¡æœ‰å·®å¼‚åˆ™ä»€ä¹ˆéƒ½ä¸æ“ä½œ,ç»“æŸä¸€æ¬¡å¾ªç¯</li> <li><code>oldEndIdx--/newEndIdx--</code></li></ul> <h4 id="æ—§å¼€å§‹èŠ‚ç‚¹-æ–°ç»“æŸèŠ‚ç‚¹-æƒ…å†µ3"><a href="#æ—§å¼€å§‹èŠ‚ç‚¹-æ–°ç»“æŸèŠ‚ç‚¹-æƒ…å†µ3" class="header-anchor">#</a> æ—§å¼€å§‹èŠ‚ç‚¹/æ–°ç»“æŸèŠ‚ç‚¹(æƒ…å†µ3)</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLZVArY457qurQ68lYhlOoMwPsP0MH6vwhmCCqbkFA9UticROnNkicLHMw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li>è‹¥<code>æƒ…å†µ1,2</code>éƒ½ä¸ç¬¦åˆ,å°±ä¼šå°è¯•æƒ…å†µ3:(æ—§èŠ‚ç‚¹çš„å¼€å§‹èŠ‚ç‚¹ä¸æ–°èŠ‚ç‚¹çš„ç»“æŸèŠ‚ç‚¹å¼€å§‹å¯¹æ¯”,<code>oldCh[oldStartIdx]å’ŒnewCh[newEndIdx]</code>å¯¹æ¯”,æ‰§è¡Œ<code>sameVnode(keyå’Œselç›¸åŒ)</code>åˆ¤æ–­æ˜¯å¦ç›¸åŒèŠ‚ç‚¹)</li> <li>æ‰§è¡Œ<code>patchVnode</code>æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚,æ›´æ–°è§†å›¾,å¦‚æ²¡æœ‰å·®å¼‚åˆ™ä»€ä¹ˆéƒ½ä¸æ“ä½œ,ç»“æŸä¸€æ¬¡å¾ªç¯</li> <li><code>oldCh[oldStartIdx]å¯¹åº”çš„çœŸå®dom</code>ä½ç§»åˆ°<code>oldCh[oldEndIdx]å¯¹åº”çš„çœŸå®dom</code>å</li> <li><code>oldStartIdx++/newEndIdx--</code>;</li></ul> <h4 id="æ—§ç»“æŸèŠ‚ç‚¹-æ–°å¼€å§‹èŠ‚ç‚¹-æƒ…å†µ4"><a href="#æ—§ç»“æŸèŠ‚ç‚¹-æ–°å¼€å§‹èŠ‚ç‚¹-æƒ…å†µ4" class="header-anchor">#</a> æ—§ç»“æŸèŠ‚ç‚¹/æ–°å¼€å§‹èŠ‚ç‚¹(æƒ…å†µ4)</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLrSn8AFYYhe5PkXz3mvF8vmlgMIVWMib7ia6M8RPLiaF0icOjecqDARRQrw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li>è‹¥<code>æƒ…å†µ1,2,3</code>éƒ½ä¸ç¬¦åˆ,å°±ä¼šå°è¯•æƒ…å†µ4:(æ—§èŠ‚ç‚¹çš„ç»“æŸèŠ‚ç‚¹ä¸æ–°èŠ‚ç‚¹çš„å¼€å§‹èŠ‚ç‚¹å¼€å§‹å¯¹æ¯”,<code>oldCh[oldEndIdx]å’ŒnewCh[newStartIdx]</code>å¯¹æ¯”,æ‰§è¡Œ<code>sameVnode(keyå’Œselç›¸åŒ)</code>åˆ¤æ–­æ˜¯å¦ç›¸åŒèŠ‚ç‚¹)</li> <li>æ‰§è¡Œ<code>patchVnode</code>æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚,æ›´æ–°è§†å›¾,å¦‚æ²¡æœ‰å·®å¼‚åˆ™ä»€ä¹ˆéƒ½ä¸æ“ä½œ,ç»“æŸä¸€æ¬¡å¾ªç¯</li> <li><code>oldCh[oldEndIdx]å¯¹åº”çš„çœŸå®dom</code>ä½ç§»åˆ°<code>oldCh[oldStartIdx]å¯¹åº”çš„çœŸå®dom</code>å‰</li> <li><code>oldEndIdx--/newStartIdx++</code>;</li></ul> <h4 id="æ–°å¼€å§‹èŠ‚ç‚¹-æ—§èŠ‚ç‚¹æ•°ç»„ä¸­å¯»æ‰¾èŠ‚ç‚¹-æƒ…å†µ5"><a href="#æ–°å¼€å§‹èŠ‚ç‚¹-æ—§èŠ‚ç‚¹æ•°ç»„ä¸­å¯»æ‰¾èŠ‚ç‚¹-æƒ…å†µ5" class="header-anchor">#</a> æ–°å¼€å§‹èŠ‚ç‚¹/æ—§èŠ‚ç‚¹æ•°ç»„ä¸­å¯»æ‰¾èŠ‚ç‚¹(æƒ…å†µ5)</h4> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLDfkGugZlWV20ibb28fccQYyfnVQrKRkbI0OhQk7YWMfzGa2lhRZiatYQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li>ä»æ—§èŠ‚ç‚¹é‡Œé¢å¯»æ‰¾,è‹¥å¯»æ‰¾åˆ°ä¸<code>newCh[newStartIdx]</code>ç›¸åŒçš„èŠ‚ç‚¹(ä¸”å«<code>å¯¹åº”èŠ‚ç‚¹[1]</code>),æ‰§è¡Œ<code>patchVnode</code>æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚,æ›´æ–°è§†å›¾,å¦‚æ²¡æœ‰å·®å¼‚åˆ™ä»€ä¹ˆéƒ½ä¸æ“ä½œ,ç»“æŸä¸€æ¬¡å¾ªç¯</li> <li><code>å¯¹åº”èŠ‚ç‚¹[1]å¯¹åº”çš„çœŸå®dom</code>ä½ç§»åˆ°<code>oldCh[oldStartIdx]å¯¹åº”çš„çœŸå®dom</code>å‰</li></ul> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLH3WaEve0S2DSdgSNRG7ZD6wEvRbGkXZzGx1MkprolMTtTzbW9UdeSg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li><code>è‹¥æ²¡æœ‰å¯»æ‰¾åˆ°ç›¸åŒçš„èŠ‚ç‚¹</code>,åˆ™åˆ›å»ºä¸€ä¸ªä¸<code>newCh[newStartIdx]</code>èŠ‚ç‚¹å¯¹åº”çš„<code>çœŸå®dom</code>æ’å…¥åˆ°<code>oldCh[oldStartIdx]å¯¹åº”çš„çœŸå®dom</code>å‰</li> <li><code>newStartIdx++</code></li></ul> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLzpq1l65ibHAOJ2cmVFjzribYZmcS4tEFAO9Y7vLvum5w6PtZic5Fve3Fw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">379426071b8130075b11ba142f9468e2.jpeg</p> <hr> <p>ä¸‹é¢æˆ‘ä»¬å†ä»‹ç»ä¸€ä¸‹<code>ç»“æŸå¾ªç¯</code>çš„æ”¶å°¾å·¥ä½œ<code>(oldStartIdx&gt;oldEndIdx || newStartIdx&gt;newEndIdx)</code>:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLmYk2PhgcCYDS65VF1IO40oePD81kk9mnXtEGzmFRSz6twwVHPNRYYQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li><code>æ–°èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</code>å…ˆéå†å®Œ(<code>newStartIdx&gt;newEndIdx</code>),å¾ªç¯ç»“æŸ</li> <li><code>æ–°èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</code>éå†ç»“æŸå°±æ˜¯æŠŠæ²¡æœ‰å¯¹åº”ç›¸åŒèŠ‚ç‚¹çš„<code>å­èŠ‚ç‚¹</code>åˆ é™¤</li></ul> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLxpzF89kARG0zoXdXQXupc0PXWK4SyBSUib2vyLlemRV1zNHiaYRXpoDA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <ul><li><code>æ—§èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</code>å…ˆéå†å®Œ(<code>oldStartIdx&gt;oldEndIdx</code>),å¾ªç¯ç»“æŸ</li> <li><code>æ—§èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</code>éå†ç»“æŸå°±æ˜¯åœ¨å¤šå‡ºæ¥çš„<code>å­èŠ‚ç‚¹</code>æ’å…¥åˆ°<code>æ—§èŠ‚ç‚¹ç»“æŸèŠ‚ç‚¹</code>å‰;(æºç :<code>newCh[newEndIdx + 1].elm)</code>,å°±æ˜¯å¯¹åº”çš„<code>æ—§ç»“æŸèŠ‚ç‚¹çš„çœŸå®dom</code>,newEndIdx+1æ˜¯å› ä¸ºåœ¨åŒ¹é…åˆ°ç›¸åŒçš„èŠ‚ç‚¹éœ€è¦-1,æ‰€ä»¥éœ€è¦åŠ å›æ¥å°±æ˜¯ç»“æŸèŠ‚ç‚¹</li></ul> <p>æœ€åé™„ä¸Šæºç :</p> <div class="language- extra-class"><pre class="language-text"><code>function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {
    let oldStartIdx = 0;                // æ—§èŠ‚ç‚¹å¼€å§‹èŠ‚ç‚¹ç´¢å¼•
    let newStartIdx = 0;                // æ–°èŠ‚ç‚¹å¼€å§‹èŠ‚ç‚¹ç´¢å¼•
    let oldEndIdx = oldCh.length - 1;   // æ—§èŠ‚ç‚¹ç»“æŸèŠ‚ç‚¹ç´¢å¼•
    let oldStartVnode = oldCh[0];       // æ—§èŠ‚ç‚¹å¼€å§‹èŠ‚ç‚¹
    let oldEndVnode = oldCh[oldEndIdx]; // æ—§èŠ‚ç‚¹ç»“æŸèŠ‚ç‚¹
    let newEndIdx = newCh.length - 1;   // æ–°èŠ‚ç‚¹ç»“æŸèŠ‚ç‚¹ç´¢å¼•
    let newStartVnode = newCh[0];       // æ–°èŠ‚ç‚¹å¼€å§‹èŠ‚ç‚¹
    let newEndVnode = newCh[newEndIdx]; // æ–°èŠ‚ç‚¹ç»“æŸèŠ‚ç‚¹
    let oldKeyToIdx;                    // èŠ‚ç‚¹ç§»åŠ¨ç›¸å…³
    let idxInOld;                       // èŠ‚ç‚¹ç§»åŠ¨ç›¸å…³
    let elmToMove;                      // èŠ‚ç‚¹ç§»åŠ¨ç›¸å…³
    let before;


    // åŒçº§åˆ«èŠ‚ç‚¹æ¯”è¾ƒ
    while (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) {
        if (oldStartVnode == null) {
            oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left
        }
        else if (oldEndVnode == null) {
            oldEndVnode = oldCh[--oldEndIdx];
        }
        else if (newStartVnode == null) {
            newStartVnode = newCh[++newStartIdx];
        }
        else if (newEndVnode == null) {
            newEndVnode = newCh[--newEndIdx];
        }
        else if (sameVnode(oldStartVnode, newStartVnode)) { // åˆ¤æ–­æƒ…å†µ1
            patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);
            oldStartVnode = oldCh[++oldStartIdx];
            newStartVnode = newCh[++newStartIdx];
        }
        else if (sameVnode(oldEndVnode, newEndVnode)) {   // æƒ…å†µ2
            patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);
            oldEndVnode = oldCh[--oldEndIdx];
            newEndVnode = newCh[--newEndIdx];
        }
        else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved rightæƒ…å†µ3
            patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);
            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));
            oldStartVnode = oldCh[++oldStartIdx];
            newEndVnode = newCh[--newEndIdx];
        }
        else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved leftæƒ…å†µ4
            patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);
            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);
            oldEndVnode = oldCh[--oldEndIdx];
            newStartVnode = newCh[++newStartIdx];
        }
        else {                                             // æƒ…å†µ5
            if (oldKeyToIdx === undefined) {
                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);
            }
            idxInOld = oldKeyToIdx[newStartVnode.key];
            if (isUndef(idxInOld)) { // New element        // åˆ›å»ºæ–°çš„èŠ‚ç‚¹åœ¨æ—§èŠ‚ç‚¹çš„æ–°èŠ‚ç‚¹å‰
                api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);
            }
            else {
                elmToMove = oldCh[idxInOld];
                if (elmToMove.sel !== newStartVnode.sel) { // åˆ›å»ºæ–°çš„èŠ‚ç‚¹åœ¨æ—§èŠ‚ç‚¹çš„æ–°èŠ‚ç‚¹å‰
                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);
                }
                else {
                                                           // åœ¨æ—§èŠ‚ç‚¹æ•°ç»„ä¸­æ‰¾åˆ°ç›¸åŒçš„èŠ‚ç‚¹å°±å¯¹æ¯”å·®å¼‚æ›´æ–°è§†å›¾,ç„¶åç§»åŠ¨ä½ç½®
                    patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);
                    oldCh[idxInOld] = undefined;
                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);
                }
            }
            newStartVnode = newCh[++newStartIdx];
        }
    }
    // å¾ªç¯ç»“æŸçš„æ”¶å°¾å·¥ä½œ
    if (oldStartIdx &lt;= oldEndIdx || newStartIdx &lt;= newEndIdx) {
        if (oldStartIdx &gt; oldEndIdx) {
            // newCh[newEndIdx + 1].elmå°±æ˜¯æ—§èŠ‚ç‚¹æ•°ç»„ä¸­çš„ç»“æŸèŠ‚ç‚¹å¯¹åº”çš„domå…ƒç´ 
            // newEndIdx+1æ˜¯å› ä¸ºåœ¨ä¹‹å‰æˆåŠŸåŒ¹é…äº†newEndIdxéœ€è¦-1
            // newCh[newEndIdx + 1].elm,å› ä¸ºå·²ç»åŒ¹é…è¿‡æœ‰ç›¸åŒçš„èŠ‚ç‚¹äº†,å®ƒå°±æ˜¯ç­‰äºæ—§èŠ‚ç‚¹æ•°ç»„ä¸­çš„ç»“æŸèŠ‚ç‚¹å¯¹åº”çš„domå…ƒç´ (oldCh[oldEndIdx + 1].elm)
            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;
            // æŠŠæ–°èŠ‚ç‚¹æ•°ç»„ä¸­å¤šå‡ºæ¥çš„èŠ‚ç‚¹æ’å…¥åˆ°beforeå‰
            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);
        }
        else {
            // è¿™é‡Œå°±æ˜¯æŠŠæ²¡æœ‰åŒ¹é…åˆ°ç›¸åŒèŠ‚ç‚¹çš„èŠ‚ç‚¹åˆ é™¤æ‰
            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);
        }
    }
}
å¤åˆ¶ä»£ç 
</code></pre></div><hr> <h4 id="keyçš„ä½œç”¨"><a href="#keyçš„ä½œç”¨" class="header-anchor">#</a> keyçš„ä½œç”¨</h4> <ul><li>Diffæ“ä½œå¯ä»¥<code>æ›´åŠ å¿«é€Ÿ</code>;</li> <li>Diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®;<code>(é¿å…æ¸²æŸ“é”™è¯¯)</code></li> <li><code>ä¸æ¨èä½¿ç”¨ç´¢å¼•</code>ä½œä¸ºkey</li></ul> <p>ä»¥ä¸‹æˆ‘ä»¬çœ‹çœ‹è¿™äº›ä½œç”¨çš„å®ä¾‹:</p> <h5 id="diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®-é¿å…æ¸²æŸ“é”™è¯¯"><a href="#diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®-é¿å…æ¸²æŸ“é”™è¯¯" class="header-anchor">#</a> Diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®;<code>(é¿å…æ¸²æŸ“é”™è¯¯)</code>:</h5> <p>å®ä¾‹:a,b,cä¸‰ä¸ªdomå…ƒç´ ä¸­çš„b,cé—´æ’å…¥ä¸€ä¸ªzå…ƒç´ </p> <p>æ²¡æœ‰è®¾ç½®key<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLQBlov7cLbsewuYickoDtZ3FLd4nK1icFQnPib2jtradgpQcsLl8laVRibA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">å½“è®¾ç½®äº†key:</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <h5 id="diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®-é¿å…æ¸²æŸ“é”™è¯¯-2"><a href="#diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®-é¿å…æ¸²æŸ“é”™è¯¯-2" class="header-anchor">#</a> Diffæ“ä½œå¯ä»¥æ›´åŠ å‡†ç¡®;<code>(é¿å…æ¸²æŸ“é”™è¯¯)</code></h5> <p>å®ä¾‹:a,b,cä¸‰ä¸ªdomå…ƒç´ ,ä¿®æ”¹äº†aå…ƒç´ çš„æŸä¸ªå±æ€§å†å»åœ¨aå…ƒç´ å‰æ–°å¢ä¸€ä¸ªzå…ƒç´ </p> <p>æ²¡æœ‰è®¾ç½®key:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLicShV9Z6VakI8f5xOAdNRYtmlHNAmqx4UgOAWztdoicryEgImaNiaKTQQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLppGHLibOEHonGxhLfqeNKp2u4vs6vNvg9OwMrSu3cCjOpuQATp8XicMA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p>å› ä¸ºæ²¡æœ‰è®¾ç½®key,é»˜è®¤éƒ½æ˜¯undefined,æ‰€ä»¥èŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„,æ›´æ–°äº†textçš„å†…å®¹ä½†è¿˜æ˜¯æ²¿ç”¨äº†ä¹‹å‰çš„dom,æ‰€ä»¥å®é™…ä¸Š<code>a-&gt;z(aåŸæœ¬æ‰“å‹¾çš„çŠ¶æ€ä¿ç•™äº†,åªæ”¹å˜äº†text),b-&gt;a,c-&gt;b,d-&gt;c</code>,éå†å®Œæ¯•å‘ç°è¿˜è¦å¢åŠ ä¸€ä¸ªdom,åœ¨æœ€åæ–°å¢ä¸€ä¸ªtextä¸ºdçš„domå…ƒç´ </p> <p>è®¾ç½®äº†key:</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGL3bJXibeUugGXzPCEDibqhdKqWsibJMibahnicqjfOQfr8JHC5LTSEymKiaGA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p>å½“è®¾ç½®äº†key,a,b,c,déƒ½æœ‰å¯¹åº”çš„key,<code>a-&gt;a,b-&gt;b,c-&gt;c,d-&gt;d</code>,å†…å®¹ç›¸åŒæ— éœ€æ›´æ–°,éå†ç»“æŸ,æ–°å¢ä¸€ä¸ªtextä¸ºzçš„domå…ƒç´ </p> <h5 id="ä¸æ¨èä½¿ç”¨ç´¢å¼•ä½œä¸ºkey"><a href="#ä¸æ¨èä½¿ç”¨ç´¢å¼•ä½œä¸ºkey" class="header-anchor">#</a> <code>ä¸æ¨èä½¿ç”¨ç´¢å¼•</code>ä½œä¸ºkey:</h5> <p>è®¾ç½®ç´¢å¼•ä¸ºkey:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLXyG20PYXWkPjWciaFFZPtO6nd3cia8mXE4otXqq1FeYbNb6j0VzFLwyA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <p>è¿™æ˜æ˜¾æ•ˆç‡ä¸é«˜,æˆ‘ä»¬åªå¸Œæœ›æ‰¾å‡ºä¸åŒçš„èŠ‚ç‚¹æ›´æ–°,è€Œä½¿ç”¨ç´¢å¼•ä½œä¸ºkeyä¼šå¢åŠ è¿ç®—æ—¶é—´,æˆ‘ä»¬å¯ä»¥æŠŠkeyè®¾ç½®ä¸ºä¸èŠ‚ç‚¹textä¸ºä¸€è‡´å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜:</p> <p><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHrBPOs1OFIWuxw354WxNWGLdzMXJFmut6AoNtXKorxW9HAbcMsctLKDrsH3z99F79KApCIGHyZ4rA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">image.png</p> <hr> <h2 id="æœ€å"><a href="#æœ€å" class="header-anchor">#</a> æœ€å</h2> <p>å¦‚æœ‰æè¿°é”™è¯¯æˆ–è€…ä¸æ˜çš„åœ°æ–¹è¯·åœ¨ä¸‹æ–¹è¯„è®ºè”ç³»æˆ‘,æˆ‘ä¼šç«‹åˆ»æ›´æ–°,å¦‚æœ‰æ”¶è·,è¯·ä¸ºæˆ‘ç‚¹ä¸ªèµğŸ‘è¿™æ˜¯å¯¹æˆ‘çš„è«å¤§çš„æ”¯æŒ,è°¢è°¢å„ä½</p> <p>å…³äºæœ¬æ–‡</p> <h1 id="ä½œè€…-æ¸£æ¸£xiong"><a href="#ä½œè€…-æ¸£æ¸£xiong" class="header-anchor">#</a> ä½œè€…ï¼šæ¸£æ¸£xiong</h1> <p>https://juejin.cn/post/7000266544181674014</p> <p>æ¨èé˜…è¯»</p> <p><a href="http://mp.weixin.qq.com/s?__biz=MzAxODE4MTEzMA==&amp;mid=2650090299&amp;idx=1&amp;sn=d08a44bc38d31855fbd7bf9379ed6562&amp;chksm=83dbb65eb4ac3f485cbc0744b6eb10d179cfddd447a1dbe72aab97a8e323a7ea0939d315bc5e&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">66 é“å‰ç«¯ç®—æ³•é¢è¯•é¢˜é™„æ€è·¯åˆ†æåŠ©ä½ æŸ¥æ¼è¡¥ç¼º<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/algorithm/ç®—æ³•è¿›é˜¶/ChromeV8æºç çœ‹JavaScriptæ•°ç»„.html" class="prev">
        å‰ç«¯è¿›é˜¶ç®—æ³•2ï¼šä»Chrome V8æºç çœ‹JavaScriptæ•°ç»„(é™„èµ è…¾è®¯é¢è¯•é¢˜)
      </a></span> <span class="next"><a href="/algorithm/ç®—æ³•è¿›é˜¶/Diffç®—æ³•æ ¸å¿ƒåŸç†.html">
        15å¼ å›¾ï¼Œ20åˆ†é’Ÿåƒé€Diffç®—æ³•æ ¸å¿ƒåŸç†
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.950eebbc.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/30.9ad0e230.js" defer></script>
  </body>
</html>
